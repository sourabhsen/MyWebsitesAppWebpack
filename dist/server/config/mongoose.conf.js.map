{"version":3,"sources":["../../../app/config/mongoose.conf.js"],"names":["mongoose","gracefulExit","connection","close","console","log","process","exit","on","ref","env","NODE_ENV","err","error","connect","MONGO_URI"],"mappings":";;;;;;AACA;;kBAEe,UAACA,QAAD,EAAc;;AAE3B,MAAIC,eAAe,SAAfA,YAAe,GAAW;;AAE5BD,aAASE,UAAT,CAAoBC,KAApB,CAA0B,YAAM;;AAE9BC,cAAQC,GAAR,CAAY,mEAAZ;;AAGAC,cAAQC,IAAR,CAAa,CAAb;AACD,KAND;AAOD,GATD;;AAWAP,WAASE,UAAT,CAAoBM,EAApB,CAAuB,WAAvB,EAAoC,UAACC,GAAD,EAAS;;AAE3CL,YAAQC,GAAR,CAAY,+BAA6BC,QAAQI,GAAR,CAAYC,QAAzC,0BAAZ;AAED,GAJD;;AAMA;AACAX,WAASE,UAAT,CAAoBM,EAApB,CAAuB,OAAvB,EAAgC,UAACI,GAAD,EAAS;;AAEvCR,YAAQS,KAAR,CAAc,0BAAwBP,QAAQI,GAAR,CAAYC,QAApC,gCAAd,EAC2BC,GAD3B;AAED,GAJD;;AAMA;AACAZ,WAASE,UAAT,CAAoBM,EAApB,CAAuB,cAAvB,EAAuC,YAAM;;AAE3CJ,YAAQC,GAAR,CAAY,oCAAkCC,QAAQI,GAAR,CAAYC,QAA9C,2BAAZ;AAED,GAJD;;AAMA;AACAL,UAAQE,EAAR,CAAW,QAAX,EAAqBP,YAArB,EAAmCO,EAAnC,CAAsC,SAAtC,EAAiDP,YAAjD;;AAEA;AACA;AACAD,WAASc,OAAT,CAAiBR,QAAQI,GAAR,CAAYK,SAA7B,EAAwC,UAACF,KAAD,EAAW;;AAEjD,QAAIA,KAAJ,EACE,MAAMA,KAAN;AACH,GAJD;AAKD,C","file":"mongoose.conf.js","sourcesContent":["\r\n// *mongoose.conf.js*\r\n\r\nexport default (mongoose) => {\r\n\r\n  let gracefulExit = function() {\r\n\r\n    mongoose.connection.close(() => {\r\n\r\n      console.log(`Mongoose connection ` +\r\n        `has disconnected through app termination`);\r\n\r\n      process.exit(0);\r\n    });\r\n  };\r\n\r\n  mongoose.connection.on(\"connected\", (ref) => {\r\n\r\n    console.log(`Successfully connected to ${process.env.NODE_ENV}` +\r\n      ` database on startup `);\r\n  });\r\n\r\n  // If the connection throws an error\r\n  mongoose.connection.on(\"error\", (err) => {\r\n\r\n    console.error(`Failed to connect to ${process.env.NODE_ENV} ` +\r\n      ` database on startup `, err);\r\n  });\r\n\r\n  // When the connection is disconnected\r\n  mongoose.connection.on('disconnected', () => {\r\n\r\n    console.log(`Mongoose default connection to ${process.env.NODE_ENV}` +\r\n      ` database disconnected`);\r\n  });\r\n\r\n  // If the Node process ends, close the Mongoose connection\r\n  process.on('SIGINT', gracefulExit).on('SIGTERM', gracefulExit);\r\n\r\n  // Connect to our MongoDB database using the MongoDB\r\n  // connection URI from our predefined environment variable\r\n  mongoose.connect(process.env.MONGO_URI, (error) => {\r\n\r\n    if (error)\r\n      throw error;\r\n  });\r\n};\r\n"]}