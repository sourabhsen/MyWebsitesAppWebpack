{"version":3,"sources":["../../app/routes.js"],"names":["app","router","passport","use","req","res","next","console","log","auth","isAuthenticated","send","admin","user","role","get","request_url","render","redirect"],"mappings":";;;;;;AAQA;;;;AAGA;;;;AAGA;;;;AAGA;;;;AAGA;;;;;;AAJA;;;AANA;kBAYe,UAACA,GAAD,EAAMC,MAAN,EAAcC,QAAd,EAA2B;;AAExC;AACAD,SAAOE,GAAP,CAAW,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;;AAE7BC,YAAQC,GAAR,CAAY,uCAAZ,EAF6B,CAEyB;;AAEtD;AACAF;AACD,GAND;;AAQA;AACA,MAAIG,OAAO,SAAPA,IAAO,CAACL,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;;AAE7B,QAAI,CAACF,IAAIM,eAAJ,EAAL,EACEL,IAAIM,IAAJ,CAAS,GAAT,EADF,KAIEL;AACH,GAPD;;AASA;AACA;AACA,MAAIM,QAAQ,SAARA,KAAQ,CAACR,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;;AAE9B,QAAI,CAACF,IAAIM,eAAJ,EAAD,IAA0BN,IAAIS,IAAJ,CAASC,IAAT,KAAkB,OAAhD,EACET,IAAIM,IAAJ,CAAS,GAAT,EADF,KAIEL;AACH,GAPD;;AASA;;AAEA;;AAEA;;AAEA;AACA;AACA,sCAAWN,GAAX,EAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCO,IAAlC,EAAwCG,KAAxC;;AAEA;;AAEA;AACA,4BAAWZ,GAAX,EAAgBC,MAAhB;;AAED,8BAAaD,GAAb,EAAkBC,MAAlB;;AAEC,gCAAeD,GAAf,EAAmBC,MAAnB;;AAEA,mCAAkBD,GAAlB,EAAuBC,MAAvB;;AAED;AACAD,MAAIG,GAAJ,CAAQ,MAAR,EAAgBF,MAAhB;;AAEC;;AAEA;AACAD,MAAIe,GAAJ,CAAQ,GAAR,EAAa,UAACX,GAAD,EAAMC,GAAN,EAAc;;AAEzB,QAAIW,cAAa,kKAAjB;AACA;AACA;AACCX,QAAIY,MAAJ,CAAW,YAAX;AACF;AAEA,GARD;;AAUC;AACDjB,MAAIe,GAAJ,CAAQ,IAAR,EAAc,UAACX,GAAD,EAAMC,GAAN,EAAc;;AAE1B;AACA;AACAA,QAAIa,QAAJ,CAAa,GAAb;AAED,GAND;;AAQD;;;;;AAOA,C;;AAxFD;;;AANA;;AAZA;;AAEA;;AAEA;;AAEA","file":"routes.js","sourcesContent":["\n// */app/routes.js*\n\n// ## Node API Routes\n\n// Define routes for the Node backend\n\n// Load our API routes for user authentication\nimport authRoutes from './routes/_authentication.router.js';\n\n// Load our API routes for the `todo` component\nimport todoRoutes from './routes/_todo.router.js';\n\n// Load our API routes for the `recipe` component\nimport recipeRoutes from './routes/_recipe.router.js';\n\n//Load our API routes for the 'blog posts' component\nimport blogPostRoutes from './routes/_blogpost.router.js';  \n\n//Load our API routes for the 'blog posts' component\nimport projectWorkRoutes from './routes/_projectwork.router.js';  \n\nexport default (app, router, passport) => {\n\n  // ### Express Middlware to use for all requests\n  router.use((req, res, next) => {\n\n    console.log('I sense a disturbance in the force...'); // DEBUG\n\n    // Make sure we go to the next routes and don't stop here...\n    next();\n  });\n\n  // Define a middleware function to be used for all secured routes\n  let auth = (req, res, next) => {\n\n    if (!req.isAuthenticated())\n      res.send(401);\n\n    else\n      next();\n  };\n\n  // Define a middleware function to be used for all secured administration\n  // routes\n  let admin = (req, res, next) => {\n\n    if (!req.isAuthenticated() || req.user.role !== 'admin')\n      res.send(401);\n\n    else\n      next();\n  };\n\n  // ### Server Routes\n\n  // Handle things like API calls,\n\n  // #### Authentication routes\n\n  // Pass in our Express app and Router.\n  // Also pass in auth & admin middleware and Passport instance\n  authRoutes(app, router, passport, auth, admin);\n\n  // #### RESTful API Routes\n\n  // Pass in our Express app and Router\n  todoRoutes(app, router);\n\n\trecipeRoutes(app, router);\n\n  blogPostRoutes(app,router);\n\n  projectWorkRoutes(app, router);\n\n\t// All of our routes will be prefixed with /api\n\tapp.use('/api', router);\n\n  // ### Frontend Routes\n\n  // Route to handle all Angular requests\n  app.get('/', (req, res) => {\n    \n    let request_url ='https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=75nwsrs8dwshgk&redirect_uri=http://localhost:3030&state=996302&scope=r_basicprofile';\n    // Load our src/app.html file\n    //** Note that the root is set to the parent of this folder, ie the app root **\n     res.render('index.html');\n   // res.redirect(request_url);\n    \n  });\n\n   // Route to handle all Angular requests\n  app.get('/*', (req, res) => {\n     \n    // Load our src/app.html file\n    //** Note that the root is set to the parent of this folder, ie the app root **\n    res.redirect('/');\n    \n  });\n\n /*  app.get('/app.bundle.js', function (req, res) {\n\n    // Load our src/app.html file\n    //** Note that the root is set to the parent of this folder, ie the app root **\n    res.sendFile('/dist/app.bundle.js', { root: __dirname + \"/../\" });\n  }); */\n  \n};\n"]}