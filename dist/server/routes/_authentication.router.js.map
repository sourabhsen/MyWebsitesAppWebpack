{"version":3,"sources":["../../../app/routes/_authentication.router.js"],"names":["stringify","require","https","HttpsProxyAgent","request","proxy","agent","ObjectId","Types","app","router","passport","auth","admin","get","req","res","options","url","headers","callback","error","response","body","statusCode","info","JSON","parse","linked","linkedIn","save","err","result","console","log","sendStatus","find","send","json","length"],"mappings":";;;;;;AAiBA;;;;AAEA;;;;;;AAlBA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AAKA,IAAIA,YAAYC,QAAQ,qBAAR,CAAhB;;AAEA,IAAIC,QAAQD,QAAQ,OAAR,CAAZ;AACA,IAAIE,kBAAkBF,QAAQ,mBAAR,CAAtB;AACA,IAAKG,UAAUH,QAAQ,SAAR,CAAf;AACA,IAAII,QAAQ,wBAAZ;AACA,IAAIC,QAAQ,IAAIH,eAAJ,CAAoBE,KAApB,CAAZ;;AAGA;AACA;AACA,IAAIE,WAAWN,QAAQ,UAAR,EAAoBO,KAApB,CAA0BD,QAAzC;;kBAEe,UAACE,GAAD,EAAMC,MAAN,EAAcC,QAAd,EAAwBC,IAAxB,EAA8BC,KAA9B,EAAwC;;AAEvDH,SAAOI,GAAP,CAAW,cAAX,EAA0B,UAACC,GAAD,EAAMC,GAAN,EAAa;;AAElC,QAAIC,UAAU;AACXC,WAAK,yoCADM;AAEXC,eAAS;AACP,sBAAc;AADP;AAFE,KAAd;;AAOC,aAASC,QAAT,CAAkBC,KAAlB,EAAyBC,QAAzB,EAAmCC,IAAnC,EAAyC;;AAEvC,UAAI,CAACF,KAAD,IAAUC,SAASE,UAAT,IAAuB,GAArC,EAA0C;AACxC,YAAIC,OAAOC,KAAKC,KAAL,CAAWJ,IAAX,CAAX;;AAEA,YAAIK,SAAU,IAAIC,uBAAJ,CAAaJ,IAAb,CAAd;;AAEEG,eAAOE,IAAP,CAAY,UAASC,GAAT,EAAaC,MAAb,EAAoB;AAC1BC,kBAAQC,GAAR,CAAY,mBAAZ;AACAD,kBAAQC,GAAR,CAAY,QAAZ,EAAqBF,MAArB;AACAC,kBAAQC,GAAR,CAAY,OAAZ,EAAoBH,GAApB;AACH,SAJH;AAKDf,YAAImB,UAAJ,CAAe,GAAf;AACF,OAXD,MAWK;AACF,YAAGd,KAAH,EAAS;AACPL,cAAImB,UAAJ,CAAe,GAAf;AACD;AACH;AACF;;AAGD/B,YAAQa,OAAR,EAAiBG,QAAjB;AAGL,GAjCD;;AAmCAV,SAAOI,GAAP,CAAW,WAAX,EAAwB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjC;AACCa,4BAASO,IAAT,CAAc,UAACL,GAAD,EAAMT,QAAN,EAAmB;;AAE/B,UAAGS,GAAH,EACEf,IAAIqB,IAAJ,CAASN,GAAT,EADF,KAGEf,IAAIsB,IAAJ,CAAShB,SAASA,SAASiB,MAAT,GAAkB,CAA3B,CAAT;AACH,KAND;AAOH,GATH;AAWC,C","file":"_authentication.router.js","sourcesContent":["\n// */app/routes/_authentication.router.js*\n\n// GET    */api/auth/user*        Get user data from session object in\n//                                Node\n\n// GET    */api/auth/loggedin*    Route to test if the user is logged in\n//                                or not\n\n// POST   */api/auth/login*       Route to login\n\n// POST   */api/auth/logout*      Route to logout and redirect to the\n//                                appropriate view\n\n// ## Authentication API object\n\n// Load user model\nimport User from '../models/user.model.js';\n\nimport linkedIn from '../models/Linkedin/linkedin.model.js';\n\nlet stringify = require(\"json-stringify-safe\");\n\nlet https = require(\"https\");\nlet HttpsProxyAgent = require('https-proxy-agent');  \nlet  request = require('request');  \nlet proxy = 'http://localhost:3030/';  \nlet agent = new HttpsProxyAgent(proxy); \n\n\n// Load the Mongoose ObjectId function to cast string as\n// ObjectId\nlet ObjectId = require('mongoose').Types.ObjectId;\n\nexport default (app, router, passport, auth, admin) => {\n\nrouter.get('/getlinkedIn',(req, res) =>{\n\n     var options = {\n        url: 'https://api.linkedin.com/v1/people/~:(id,num-connections,num-connections-capped,first-name,last-name,emailAddress,headline,picture-url,industry,summary,specialties,positions:(id,title,summary,start-date,end-date,is-current,company:(id,name,type,size,industry,ticker)),educations:(id,school-name,field-of-study,start-date,end-date,degree,activities,notes),associations,interests,num-recommenders,date-of-birth,publications:(id,title,publisher:(name),authors:(id,name),date,url,summary),patents:(id,title,summary,number,status:(id,name),office:(name),inventors:(id,name),date,url),languages:(id,language:(name),proficiency:(level,name)),skills:(id,skill:(name)),certifications:(id,name,authority:(name),number,start-date,end-date),courses:(id,name,number),recommendations-received:(id,recommendation-type,recommendation-text,recommender:(picture-url,headline,firstName,lastName)),honors-awards,three-current-positions,three-past-positions,volunteer)?oauth2_access_token=AQWN072mbxlACRWqGg8WcFSDZ8gfD6AxUH23xUH_LvqO1Rd_5IHdyhZjd9VfwverixXQbphIw_XDqNYXblHEpqm90uoiYma5yx4Rx0grAKYUIKEMRRgkPaaQtFDOrK_37R84wwUxQjKWkGAERg8nzGgXDQocgASOqWYoZTxzS0ANm9Bi0vk&format=json',\n        headers: {\n          'User-Agent': 'request'\n        }\n      };\n      \n      function callback(error, response, body) {\n        \n        if (!error && response.statusCode == 200) {\n          let info = JSON.parse(body);\n          \n          let linked =  new linkedIn(info);\n           \n            linked.save(function(err,result){\n                  console.log('saves sucessfully');\n                  console.log(\"result\",result);\n                  console.log(\"error\",err);\n              });\n           res.sendStatus(200);\n        }else{\n           if(error){\n             res.sendStatus(500);\n           }\n        }\n      }\n      \n      \n      request(options, callback);\n     \n\n})\n\nrouter.get('/linkedin', (req, res) => {\n     // Use mongoose to get all blog items in the database\n      linkedIn.find((err, response) => {\n       \n        if(err)\n          res.send(err);\n        else\n          res.json(response[response.length - 1]);\n      });\n  });\n\n};\n"]}